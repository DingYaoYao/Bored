<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
	<title>Bored</title>
	<link rel="stylesheet" type="text/css" href="css/normalize.css" />
	<link rel="stylesheet" type="text/css" href="css/default.css">
	<link rel='stylesheet prefetch' href='http://fonts.useso.com/css?family=Open+Sans'>
	<link rel="stylesheet" type="text/css" href="css/styles.css">
	<!--[if IE]>
		<script src="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
	<![endif]-->
</head>
<style type="text/css">
	/*#hang{*/
		/*width:1000px;*/
		/*height: 2000px;*/
	/*}*/
</style>
<body>

	<div class="demo" id="hang">
			  <svg class="sidebar" viewBox="0 0 300 500">
			    <path class="s-path" fill="#fff" d="M0,0 50,0 a0,250 0 1,1 0,500 L0,500" />
			  </svg>
			  <div class="static">
			    <div class="static__text">左滑进入</div>
			  </div>
			  <div class="sidebar-content" id="dingyao">

			  </div>
			  <div class="chat">
			    <span class="chat__back"></span>
			    <span class="chat__status">status</span>
			    <div class="chat__person">
			      <span class="chat__online active"></span>
			      <span class="chat__name">Huehue Huehue</span>
			    </div>
			    <div class="chat__messages">
			      <div class="chat__msgRow">
			        <div class="chat__message mine">欢迎来到Bored</div>
			      </div>
			      <div class="chat__msgRow">
			        <div class="chat__message notMine">Good!</div>
				  </div>

			      <div class="chat__msgRow">
			        <div class="chat__message mine">
			        </div>
			      </div>
			    </div>
			    <input type="text" class="chat__input" placeholder="想说点什么" />
			  </div>
			</div>


	<script type="text/javascript" src='js/stopExecutionOnTimeout.js?t=1'></script>
	<script type="text/javascript" src='js/jquery.min.js'></script>
	<script type="text/javascript" src="js/main.js"></script>
	<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript">

	var  a=localStorage.getItem('BORED');
	var b=JSON.parse(a);
	if(b==null){
		location.href="index";
	}
	 $.ajax({
	 	type : "GET", //请求类型
	 	url : "http://127.0.0.1:9000/api/pal/GetuserPal", //请求的url
	 	data : {
	 		bored:b.token
	 	},
	 	dataType : "json", //ajax接口（请求url）返回的数据类型
	 	success : function(data) { //data：返回数据（json对象）
	 		if (data.message!=null) {
	 			alert("用户还没有登陆");
				location.href="index";
	 		}else if(data.data[0]!=null){
	 			var item=data.data;
				var html="";
				for (let i = 0; i <item.length; i++) {

                  //  alert(JSON.stringify(item[i]));
                   // alert(item[i].friendNicename)
				}
	 			for(let i=0;i<item.length;i++){
	 			    let friendNicename= item[i].friendNicename;
	 			    let friendUserId=item[i].friendUserId;
                    if(friendNicename!=null){
                    	html+="<div class=\"contact\">" +
                    			"<img src='img/1.png' alt=''class='contact__photo' />" +
                    			"<span class='contact__name'>"+friendNicename+"</span>" +
                    			"<span class=\"contact__status online\"></span>"+
                    			"</div>";
                    }else{
						html+="<div class=\"contact\">" +
								"<img src=\"img/6.png\" alt=\"\" class=\"contact__photo\" />" +
								"<span class=\"contact__name\">"+friendUserId+"</span>" +
								"<span class=\"contact__status online\"></span>"+
								"</div>";
					}
				}
	 			html+="    <div class=\"search\">\n" +
                    " <img src=\"img/t8TeL1S.png\" alt=\"\" class=\"search__img\" />" +
                    " <input type=\"text\" class=\"search__input\" placeholder=\"Search\" />" +
                    " </div>";
					$("#dingyao").html(html);
			} else {
                $("#dingyao").html("    <div class=\"search\">"+"你还没有好友"+"</div>");
	 		}
	 	},
	 	error : function(data) {//当访问时候，404，500 等非200的错误状态码
	 		alert("获取好友列表失败 出现了我无法预知的错误");
	 	}
	 })


</script>
</body>
</html>
